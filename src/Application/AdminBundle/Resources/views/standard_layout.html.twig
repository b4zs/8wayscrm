{% extends '@SonataAdmin/standard_layout.html.twig' %}

{#{% block side_bar_nav %}#}
	{#{% if app.security.token and is_granted('ROLE_SONATA_ADMIN') %}#}
		{#<ul class="sidebar-menu">#}
			{#{% for group in admin_pool.dashboardgroups %}#}
				{#{% set display = (group.roles is empty or is_granted('ROLE_SUPER_ADMIN') ) %}#}
				{#{% for role in group.roles if not display %}#}
					{#{% set display = is_granted(role) %}#}
				{#{% endfor %}#}

				{#{% set display = display and (group.label not in ['sonata_media', 'sonata_user']) %}#}

				{#&#123;&#35; Do not display the group label if no item in group is available &#35;&#125;#}
				{#{% set item_count = 0 %}#}
				{#{% if display %}#}
					{#{% for admin in group.items if item_count == 0 %}#}
						{#{% if admin.hasroute('list') and admin.isGranted('LIST') %}#}
							{#{% set item_count = item_count+1 %}#}
						{#{% endif %}#}
					{#{% endfor %}#}
				{#{% endif %}#}

				{#{% if display and (item_count > 0) %}#}
					{#{% set active = false %}#}
					{#{% for admin in group.items %}#}
						{#{% if admin.hasroute('list') and admin.isGranted('LIST') and app.request.get('_sonata_admin') == admin.code %}#}
							{#{% set active = true %}#}
						{#{% endif %}#}
					{#{% endfor %}#}
					{#<li class="treeview{% if active %} active{% endif %}">#}
						{#<a href="#">#}
							{#{% if group.icon|default() %}{{ group.icon|raw }}{% endif %}#}
							{#<span>{{ group.label|trans({}, group.label_catalogue) }}</span>#}
							{#<i class="fa pull-right fa-angle-left"></i>#}
						{#</a>#}
						{#<ul class="treeview-menu{% if active %} active{% endif %}">#}
							{#{% for admin in group.items %}#}
								{#{% if admin.hasroute('list') and admin.isGranted('LIST') %}#}
									{#<li{% if app.request.get('_sonata_admin') == admin.code %} class="active"{% endif %}><a href="{{ admin.generateUrl('list')}}"><i class="fa fa-angle-double-right"></i> {{ admin.label|trans({}, admin.translationdomain) }}</a></li>#}
								{#{% endif %}#}
							{#{% endfor %}#}
						{#</ul>#}
					{#</li>#}
				{#{% endif %}#}
			{#{% endfor %}#}
		{#</ul>#}
	{#{% endif %}#}
{#{% endblock side_bar_nav %}#}

{% block side_bar_nav %}
	{% set item = knp_menu_get('sonata_admin_sidebar') %}
	<ul class="sidebar-menu">
		{% for child in item  %}
			<li class="treeview{% if child.isCurrent %} active{% endif %}">
				<a href="#">
					<i class="fa fa-folder"></i>
					<span>{{ child.label }}</span>
					<i class="fa pull-right fa-angle-left"></i>
				</a>
				<ul class="treeview-menu{% if child.isCurrent %} active{% endif %}">
					{% for subChild in child.children %}
						<li {% if subChild.isCurrent %}class="active"{% endif %}>
							<a href="{{ subChild.uri }}"><i class="fa fa-angle-double-right"></i> {{ subChild.label }}</a>
						</li>
					{% endfor %}
				</ul>
			</li>
		{% endfor %}
	</ul>
{% endblock %}


{% block stylesheets %}
	{{ parent() }}
	<style>
		.connection form .form-actions {
			padding-bottom: 5px;
		}
	</style>
{% endblock %}